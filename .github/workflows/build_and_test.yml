name: "Build & Test"

on:
  push:
    branches:
      - master
      - branch-DDS-3.*
      - gh_wf_*
    paths:
      - '**'
      # Don't run this workflow if the only files that changed are the
      # following. Make sure this is the same as the "pull_request.paths" list.
      - '!AUTHORS'
      - '!PROBLEM-REPORT-FORM'
      - '!LICENSE'
      - '!azure-pipelines.yml'
      - '!.travis.yml'
      - '!Dockerfile**'
      - '!.dockerignore'
      - '!.mailmap'
      - '!.github/workflows/lint.yml'
      - '!etc/**'
      - '!docs/**'
      - '!hooks/**'
      - '!tools/scripts/**'
      - '!**.md'
      - '!**.rst'
      - '!**.txt'
      - '!**/.gitignore'
      - '!**/.lint_config'
      - '!**/README*'
  pull_request:
    branches:
      - master
      - branch-DDS-3.*
    paths:
      - '**'
      # Don't run this workflow if the only files that changed are the
      # following. Make sure this is the same as the "push.paths" list.
      - '!AUTHORS'
      - '!PROBLEM-REPORT-FORM'
      - '!LICENSE'
      - '!azure-pipelines.yml'
      - '!.travis.yml'
      - '!Dockerfile**'
      - '!.dockerignore'
      - '!.mailmap'
      - '!.github/workflows/lint.yml'
      - '!etc/**'
      - '!docs/**'
      - '!hooks/**'
      - '!tools/scripts/**'
      - '!**.md'
      - '!**.rst'
      - '!**.txt'
      - '!**/.gitignore'
      - '!**/.lint_config'
      - '!**/README*'

env:
  TRIGGERING_COMMIT: ${{ github.event.pull_request.head.sha || github.sha }}

jobs:

  wait_cancel_previous:

    runs-on: ubuntu-20.04

    steps:
    - uses: convictional/trigger-workflow-and-wait@v1.3.0
      with:
        owner: ${{ github.repository_owner }}
        repo: OpenDDS
        github_token: ${{ secrets.GITHUB_TOKEN }}
        workflow_file_name: cancel_previous_runs.yml
        ref: ${{ env.TRIGGERING_COMMIT }}
        trigger_workflow: false

  ACE_TAO_u18_stat_qt_ws_sec_2:

    runs-on: ubuntu-18.04

    needs: wait_cancel_previous

    steps:
    - name: checkout OpenDDS
      uses: actions/checkout@v2.3.4
      with:
        path: OpenDDS
        submodules: true
    - name: checkout ACE_TAO
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/ACE_TAO
        ref: ace6tao2
        path: OpenDDS/ACE_TAO
    - name: get ACE_TAO commit
      shell: bash
      run: |
        cd OpenDDS/ACE_TAO
        export ACE_COMMIT=$(git rev-parse HEAD)
        echo "ACE_COMMIT=$ACE_COMMIT" >> $GITHUB_ENV
    - name: Cache Artifact
      id: cache-artifact
      uses: actions/cache@v2.1.4
      with:
        path: ${{ github.job }}.tar.xz
        key: ${{ github.job }}_ace6tao2_${{ env.ACE_COMMIT }}
    - name: install xerces
      if: steps.cache-artifact.outputs.cache-hit != 'true'
      run: sudo apt-get -y install libxerces-c-dev
    - name: checkout MPC
      uses: actions/checkout@v2.3.4
      if: steps.cache-artifact.outputs.cache-hit != 'true'
      with:
        repository: DOCGroup/MPC
        path: MPC
    - name: configure OpenDDS
      if: steps.cache-artifact.outputs.cache-hit != 'true'
      run: |
        cd OpenDDS
        ./configure --static --tests --security --ace=$GITHUB_WORKSPACE/OpenDDS/ACE_TAO/ACE --mpc=$GITHUB_WORKSPACE/MPC
    - name: build ACE and TAO
      if: steps.cache-artifact.outputs.cache-hit != 'true'
      run: |
        cd OpenDDS
        . setenv.sh
        cd ACE_TAO/ACE
        make -j4
        cd ../TAO
        make -j4
    - name: create ACE_TAO tar.xz artifact
      if: steps.cache-artifact.outputs.cache-hit != 'true'
      shell: bash
      run: |
        cd OpenDDS/ACE_TAO
        perl -ni.bak -e "print unless /opendds/" ACE/bin/MakeProjectCreator/config/default.features # remove opendds features from here, let individual build configure scripts handle those
        find . -iname "*\.o" | xargs rm
        tar cvf ../../${{ github.job }}.tar ACE/ace/config.h
        git clean -xdfn | cut -d ' ' -f 3- | xargs tar uvf ../../${{ github.job }}.tar
        xz -3 ../../${{ github.job }}.tar
    - name: upload ACE_TAO artifact
      uses: actions/upload-artifact@v2
      with:
        name: ${{ github.job }}_artifact
        path: ${{ github.job }}.tar.xz

  build_u18_stat_qt_ws_sec_2:

    runs-on: ubuntu-18.04

    needs: ACE_TAO_u18_stat_qt_ws_sec_2

    steps:
    - name: install xerces
      run: sudo apt-get -y install libxerces-c-dev
    - name: install wireshark
      run: sudo apt-get -y install wireshark-dev
    - name: install qt
      run: sudo apt-get -y install qtbase5-dev
    - name: checkout MPC
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/MPC
        path: MPC
    - name: checkout ACE_TAO
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/ACE_TAO
        ref: ace6tao2
        path: ACE_TAO
    - name: download ACE_TAO artifact
      uses: actions/download-artifact@v2
      with:
        name: ACE_TAO_u18_stat_qt_ws_sec_2_artifact
        path: ACE_TAO
    - name: extract ACE_TAO artifact
      shell: bash
      run: |
        cd ACE_TAO
        tar xvfJ ACE_TAO_u18_stat_qt_ws_sec_2.tar.xz
    - name: checkout OpenDDS
      uses: actions/checkout@v2.3.4
      with:
        path: OpenDDS
        submodules: true
    - name: setup gtest
      run: |
        cd OpenDDS/tests/googletest
        git submodule init
        git submodule update
        mkdir build
        cd build
        mkdir install
        cmake -DCMAKE_INSTALL_PREFIX=./install ..
        cmake --build . --target install
    - name: configure OpenDDS
      run: |
        cd OpenDDS
        ./configure --static --qt --security --rapidjson --gtest=$GITHUB_WORKSPACE/OpenDDS/tests/googletest/build/install --ace=$GITHUB_WORKSPACE/ACE_TAO/ACE --mpc=$GITHUB_WORKSPACE/MPC
    - name: check build configuration
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        tools/scripts/show_build_config.pl
    - uses: ammaraskar/gcc-problem-matcher@0.1
    - name: build OpenDDS
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        make -j4
    - name: Check Space on Disk
      shell: bash
      run: |
        df â€“h
    - name: run Static CI tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        cd tests
        perl auto_run_tests.pl -l static_ci_tests.lst -Config RTPS -Config STATIC -Config LINUX -Config XERCES3 -Config OPENDDS_SECURITY -Config RAPIDJSON -Config GH_ACTIONS
    - name: create OpenDDS tar.xz artifact
      shell: bash
      run: |
        cd OpenDDS
        rm -rf ACE_TAO
        find . -iname "*\.o" | xargs rm
        tar cvf ../${{ github.job }}.tar setenv.sh
        git clean -xdfn | cut -d ' ' -f 3- | xargs tar uvf ../${{ github.job }}.tar
        xz -3 ../${{ github.job }}.tar
    - name: upload OpenDDS artifact
      uses: actions/upload-artifact@v2
      with:
        name: ${{ github.job }}_artifact
        path: ${{ github.job }}.tar.xz

  messenger_u18_stat_qt_ws_sec_2:

    runs-on: ubuntu-18.04

    needs: build_u18_stat_qt_ws_sec_2

    steps:
    - name: install xerces
      run: sudo apt-get -y install libxerces-c-dev
    - name: checkout MPC
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/MPC
        path: MPC
    - name: checkout autobuild
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/autobuild
        path: autobuild
    - name: checkout ACE_TAO
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/ACE_TAO
        ref: ace6tao2
        path: ACE_TAO
    - name: download ACE_TAO artifact
      uses: actions/download-artifact@v2
      with:
        name: ACE_TAO_u18_stat_qt_ws_sec_2_artifact
        path: ACE_TAO
    - name: extract ACE_TAO artifact
      shell: bash
      run: |
        cd ACE_TAO
        tar xvfJ ACE_TAO_u18_stat_qt_ws_sec_2.tar.xz
    - name: checkout OpenDDS
      uses: actions/checkout@v2.3.4
      with:
        path: OpenDDS
        submodules: true
    - name: download OpenDDS artifact
      uses: actions/download-artifact@v2
      with:
        name: build_u18_stat_qt_ws_sec_2_artifact
        path: OpenDDS
    - name: extract OpenDDS artifact
      shell: bash
      run: |
        cd OpenDDS
        tar xvfJ build_u18_stat_qt_ws_sec_2.tar.xz
    - name: check build configuration
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        tools/scripts/show_build_config.pl
    - name: build and run CMake tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        cd tests/cmake_integration/
        perl run_ci_tests.pl --no-shared --build-config=Debug
    - name: build messenger tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        cd tests/DCPS/Messenger
        mwc.pl -type vs2019 -static
    - name: make messenger tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        cd tests/DCPS/Messenger
        make
    - name: run OpenDDS tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        mkdir ${{ github.job }}_autobuild_workspace
        cd ${{ github.job }}_autobuild_workspace
        echo using commit $TRIGGERING_COMMIT for SHA
        echo $TRIGGERING_COMMIT >> ./SHA
        cat > config.xml <<EOF
        <autobuild>
        <configuration>
        <variable name="log_file" value="output.log"/>
        <variable name="log_root" value="$DDS_ROOT/${{ github.job }}_autobuild_workspace"/>
        <variable name="project_root" value="$DDS_ROOT"/>
        <variable name="root" value="$DDS_ROOT/${{ github.job }}_autobuild_workspace"/>
        <variable name="junit_xml_output" value="Tests"/>
        </configuration>
        <command name="log" options="on"/>
        <command name="print_os_version"/>
        <command name="print_env_vars"/>
        <command name="print_ace_config"/>
        <command name="print_make_version"/>
        <command name="check_compiler" options="gcc"/>
        <command name="print_perl_version"/>
        <command name="print_autobuild_config"/>
        <command name="auto_run_tests" options="script_path=tests dir=$GITHUB_WORKSPACE/OpenDDS -l static_ci_tests.lst -Config STATIC_MESSENGER -Config RTPS -Config STATIC -Config LINUX -Config XERCES3 -Config OPENDDS_SECURITY -Config RAPIDJSON -Config GH_ACTIONS"/>
        <command name="log" options="off"/>
        <command name="process_logs" options="prettify"/>
        </autobuild>
        EOF
        $GITHUB_WORKSPACE/autobuild/autobuild.pl "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/config.xml"
    - name: upload autobuild output
      uses: actions/upload-artifact@v2
      with:
        name: ${{ github.job }}_autobuild_output
        path: OpenDDS/${{ github.job }}_autobuild_workspace
    - name: check results
      shell: bash
      run: |
        cat "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"
        if ! grep -q 'Failures: 0' "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"; then echo "::error file=latest.txt,line=0,col=0::Test Failures: see 'Test Results: ${{ github.job }}'"; fi

  compiler_u18_stat_qt_ws_sec_2:

    runs-on: ubuntu-18.04

    needs: build_u18_stat_qt_ws_sec_2

    steps:
    - name: install xerces
      run: sudo apt-get -y install libxerces-c-dev
    - name: checkout MPC
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/MPC
        path: MPC
    - name: checkout autobuild
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/autobuild
        path: autobuild
    - name: checkout ACE_TAO
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/ACE_TAO
        ref: ace6tao2
        path: ACE_TAO
    - name: download ACE_TAO artifact
      uses: actions/download-artifact@v2
      with:
        name: ACE_TAO_u18_stat_qt_ws_sec_2_artifact
        path: ACE_TAO
    - name: extract ACE_TAO artifact
      shell: bash
      run: |
        cd ACE_TAO
        tar xvfJ ACE_TAO_u18_stat_qt_ws_sec_2.tar.xz
    - name: checkout OpenDDS
      uses: actions/checkout@v2.3.4
      with:
        path: OpenDDS
        submodules: true
    - name: download OpenDDS artifact
      uses: actions/download-artifact@v2
      with:
        name: build_u18_stat_qt_ws_sec_2_artifact
        path: OpenDDS
    - name: extract OpenDDS artifact
      shell: bash
      run: |
        cd OpenDDS
        tar xvfJ build_u18_stat_qt_ws_sec_2.tar.xz
    - name: check build configuration
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        tools/scripts/show_build_config.pl
    - name: build compiler tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        cd tests/DCPS/Compiler
        mwc.pl -type vs2019 -static
    - name: make compiler tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        cd tests/DCPS/Compiler
        make
    - name: run OpenDDS tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        mkdir ${{ github.job }}_autobuild_workspace
        cd ${{ github.job }}_autobuild_workspace
        echo using commit $TRIGGERING_COMMIT for SHA
        echo $TRIGGERING_COMMIT >> ./SHA
        cat > config.xml <<EOF
        <autobuild>
        <configuration>
        <variable name="log_file" value="output.log"/>
        <variable name="log_root" value="$DDS_ROOT/${{ github.job }}_autobuild_workspace"/>
        <variable name="project_root" value="$DDS_ROOT"/>
        <variable name="root" value="$DDS_ROOT/${{ github.job }}_autobuild_workspace"/>
        <variable name="junit_xml_output" value="Tests"/>
        </configuration>
        <command name="log" options="on"/>
        <command name="print_os_version"/>
        <command name="print_env_vars"/>
        <command name="print_ace_config"/>
        <command name="print_make_version"/>
        <command name="check_compiler" options="gcc"/>
        <command name="print_perl_version"/>
        <command name="print_autobuild_config"/>
        <command name="auto_run_tests" options="script_path=tests dir=$GITHUB_WORKSPACE/OpenDDS -l static_ci_tests.lst -Config STATIC_COMPILER -Config RTPS -Config STATIC -Config LINUX -Config XERCES3 -Config OPENDDS_SECURITY -Config RAPIDJSON -Config GH_ACTIONS -a -l tests/security/security_tests.lst"/>
        <command name="log" options="off"/>
        <command name="process_logs" options="prettify"/>
        </autobuild>
        EOF
        $GITHUB_WORKSPACE/autobuild/autobuild.pl "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/config.xml"
    - name: upload autobuild output
      uses: actions/upload-artifact@v2
      with:
        name: ${{ github.job }}_autobuild_output
        path: OpenDDS/${{ github.job }}_autobuild_workspace
    - name: check results
      shell: bash
      run: |
        cat "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"
        if ! grep -q 'Failures: 0' "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"; then echo "::error file=latest.txt,line=0,col=0::Test Failures: see 'Test Results: ${{ github.job }}'"; fi

  unit_u18_stat_qt_ws_sec_2:

    runs-on: ubuntu-18.04

    needs: build_u18_stat_qt_ws_sec_2

    steps:
    - name: install xerces
      run: sudo apt-get -y install libxerces-c-dev
    - name: checkout MPC
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/MPC
        path: MPC
    - name: checkout autobuild
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/autobuild
        path: autobuild
    - name: checkout ACE_TAO
      uses: actions/checkout@v2.3.4
      with:
        repository: DOCGroup/ACE_TAO
        ref: ace6tao2
        path: ACE_TAO
    - name: download ACE_TAO artifact
      uses: actions/download-artifact@v2
      with:
        name: ACE_TAO_u18_stat_qt_ws_sec_2_artifact
        path: ACE_TAO
    - name: extract ACE_TAO artifact
      shell: bash
      run: |
        cd ACE_TAO
        tar xvfJ ACE_TAO_u18_stat_qt_ws_sec_2.tar.xz
    - name: checkout OpenDDS
      uses: actions/checkout@v2.3.4
      with:
        path: OpenDDS
        submodules: true
    - name: download OpenDDS artifact
      uses: actions/download-artifact@v2
      with:
        name: build_u18_stat_qt_ws_sec_2_artifact
        path: OpenDDS
    - name: extract OpenDDS artifact
      shell: bash
      run: |
        cd OpenDDS
        tar xvfJ build_u18_stat_qt_ws_sec_2.tar.xz
    - name: check build configuration
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        tools/scripts/show_build_config.pl
    - name: build messenger tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        cd tests/DCPS/UnitTests
        mwc.pl -type vs2019 -static
    - name: make messenger tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        cd tests/DCPS/UnitTests
        make
    - name: run OpenDDS tests
      shell: bash
      run: |
        cd OpenDDS
        . setenv.sh
        mkdir ${{ github.job }}_autobuild_workspace
        cd ${{ github.job }}_autobuild_workspace
        echo using commit $TRIGGERING_COMMIT for SHA
        echo $TRIGGERING_COMMIT >> ./SHA
        cat > config.xml <<EOF
        <autobuild>
        <configuration>
        <variable name="log_file" value="output.log"/>
        <variable name="log_root" value="$DDS_ROOT/${{ github.job }}_autobuild_workspace"/>
        <variable name="project_root" value="$DDS_ROOT"/>
        <variable name="root" value="$DDS_ROOT/${{ github.job }}_autobuild_workspace"/>
        <variable name="junit_xml_output" value="Tests"/>
        </configuration>
        <command name="log" options="on"/>
        <command name="print_os_version"/>
        <command name="print_env_vars"/>
        <command name="print_ace_config"/>
        <command name="print_make_version"/>
        <command name="check_compiler" options="gcc"/>
        <command name="print_perl_version"/>
        <command name="print_autobuild_config"/>
        <command name="auto_run_tests" options="script_path=tests dir=$GITHUB_WORKSPACE/OpenDDS -l static_ci_tests.lst -Config STATIC_UNIT -Config RTPS -Config STATIC -Config LINUX -Config XERCES3 -Config OPENDDS_SECURITY -Config RAPIDJSON -Config GH_ACTIONS -a -l tests/security/security_tests.lst"/>
        <command name="log" options="off"/>
        <command name="process_logs" options="prettify"/>
        </autobuild>
        EOF
        $GITHUB_WORKSPACE/autobuild/autobuild.pl "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/config.xml"
    - name: upload autobuild output
      uses: actions/upload-artifact@v2
      with:
        name: ${{ github.job }}_autobuild_output
        path: OpenDDS/${{ github.job }}_autobuild_workspace
    - name: check results
      shell: bash
      run: |
        cat "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"
        if ! grep -q 'Failures: 0' "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"; then echo "::error file=latest.txt,line=0,col=0::Test Failures: see 'Test Results: ${{ github.job }}'"; fi


  # ACE_TAO_w19_p1_stat_js0_3:

  #   runs-on: windows-2019

  #   needs: wait_cancel_previous

  #   steps:
  #   - name: checkout OpenDDS
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       path: OpenDDS
  #       submodules: true
  #   - name: checkout ACE_TAO
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/ACE_TAO
  #       ref: ace6tao2
  #       path: OpenDDS/ACE_TAO
  #   - name: get ACE_TAO commit
  #     shell: bash
  #     run: |
  #       cd OpenDDS/ACE_TAO
  #       export ACE_COMMIT=$(git rev-parse HEAD)
  #       echo "ACE_COMMIT=$ACE_COMMIT" >> $GITHUB_ENV
  #   - name: Cache Artifact
  #     id: cache-artifact
  #     uses: actions/cache@v2.1.4
  #     with:
  #       path: ${{ github.job }}.tar.xz
  #       key: ${{ github.job }}_ace6tao2_${{ env.ACE_COMMIT }}
  #   - name: install openssl-windows & xerces-c
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     uses: lukka/run-vcpkg@v6
  #     with:
  #       vcpkgGitCommitId: ec6fe06e8da05a8157dc8581fa96b36b571c1bd5
  #       vcpkgArguments: --recurse openssl-windows xerces-c
  #       vcpkgTriplet: x64-windows
  #   - name: checkout MPC
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/MPC
  #       path: MPC
  #   - name: set up msvc env
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     uses: ilammy/msvc-dev-cmd@v1.7.0
  #   - name: configure OpenDDS
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       configure --ipv6 --static --no-rapidjson --ace=%GITHUB_WORKSPACE%/OpenDDS/ACE_TAO/ACE --tao=%GITHUB_WORKSPACE%/OpenDDS/ACE_TAO/TAO --mpc=%GITHUB_WORKSPACE%/MPC --xerces3=%VCPKG_ROOT%/installed/x64-windows --openssl=%VCPKG_ROOT%/installed/x64-windows --mpcopts=-hierarchy
  #   - name: build ACE & TAO
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd ACE_TAO\ACE
  #       msbuild -p:Configuration=Debug,Platform=x64 -m ace.sln
  #       cd ..\TAO
  #       msbuild -p:Configuration=Debug,Platform=x64 -m tao.sln
  #   - name: create ACE_TAO tar.xz artifact
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     shell: bash
  #     run: |
  #       cd OpenDDS/ACE_TAO
  #       perl -ni.bak -e "print unless /opendds/" ACE/bin/MakeProjectCreator/config/default.features # remove opendds features from here, let individual build configure scripts handle those
  #       find . -iname "*\.obj" | xargs rm
  #       tar cvf ../../${{ github.job }}.tar ACE/ace/config.h
  #       git clean -xdfn | cut -d ' ' -f 3- | xargs tar uvf ../../${{ github.job }}.tar
  #       xz -3 ../../${{ github.job }}.tar
  #   - name: upload ACE_TAO artifact
  #     uses: actions/upload-artifact@v2
  #     with:
  #       name: ${{ github.job }}_artifact
  #       path: ${{ github.job }}.tar.xz

  # build_w19_p1_stat_js0_3:

  #   runs-on: windows-2019

  #   needs: ACE_TAO_w19_p1_stat_js0_3

  #   steps:
  #   - name: install openssl-windows & xerces-c
  #     uses: lukka/run-vcpkg@v6
  #     with:
  #       vcpkgGitCommitId: ec6fe06e8da05a8157dc8581fa96b36b571c1bd5
  #       vcpkgArguments: --recurse openssl-windows xerces-c
  #       vcpkgTriplet: x64-windows
  #   - name: checkout MPC
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/MPC
  #       path: MPC
  #   - name: checkout OpenDDS
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       path: OpenDDS
  #       submodules: true
  #   - name: checkout ACE_TAO
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/ACE_TAO
  #       ref: ace6tao2
  #       path: OpenDDS/ACE_TAO
  #   - name: download ACE_TAO artifact
  #     uses: actions/download-artifact@v2
  #     with:
  #       name: ACE_TAO_w19_p1_stat_js0_3_artifact
  #       path: OpenDDS/ACE_TAO
  #   - name: extract ACE_TAO artifact
  #     shell: bash
  #     run: |
  #       cd OpenDDS/ACE_TAO
  #       tar xvfJ ACE_TAO_w19_p1_stat_js0_3.tar.xz
  #       rm -f ACE_TAO_w19_p1_stat_js0_3.tar.xz
  #   - uses: ammaraskar/msvc-problem-matcher@0.1
  #   - name: set up msvc env
  #     uses: ilammy/msvc-dev-cmd@v1.7.0
  #   - name: setup gtest
  #     shell: cmd
  #     run: |
  #       cd OpenDDS/tests/googletest
  #       git submodule init
  #       git submodule update
  #       mkdir build
  #       cd build
  #       mkdir install
  #       cmake -DCMAKE_INSTALL_PREFIX=./install ..
  #       cmake --build . --target install
  #   - name: configure OpenDDS
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       configure --ipv6 --static --no-rapidjson --gtest=%GITHUB_WORKSPACE%/OpenDDS/tests/googletest/build/install --ace=%GITHUB_WORKSPACE%/OpenDDS/ACE_TAO/ACE --tao=%GITHUB_WORKSPACE%/OpenDDS/ACE_TAO/TAO --mpc=%GITHUB_WORKSPACE%/MPC --xerces3=%VCPKG_ROOT%/installed/x64-windows --openssl=%VCPKG_ROOT%/installed/x64-windows
  #   - name: check build configuration
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       perl tools\scripts\show_build_config.pl
  #   - name: build OpenDDS
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       msbuild -p:Configuration=Debug,Platform=x64 -m DDS_no_tests.sln
  #   - name: run Dev Guide tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd DevGuideExamples\DCPS\Messenger
  #       perl run_test.pl -ExeSubDir Static_Debug
  #   - name: build and run CMake tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests/cmake_integration/
  #       perl run_ci_tests.pl --no-shared --build-config=Debug
  #   - name: build messenger tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests\DCPS\Messenger
  #       perl %ACE_ROOT%\bin\mwc.pl -type vs2019 -static
  #   - name: make messenger tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests\DCPS\Messenger
  #       msbuild -p:Configuration=Debug,Platform=x64 -m Messenger.sln
  #   - name: build compiler tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests\DCPS\Compiler
  #       perl %ACE_ROOT%\bin\mwc.pl -type vs2019 -static
  #   - name: make compiler tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests\DCPS\Compiler
  #       dir
  #       msbuild -p:Configuration=Debug,Platform=x64 -m Compiler.sln
  #   - name: Check Space on Disk
  #     shell: cmd
  #     run: |
  #       dir c:\
  #       dir d:\
  #   - name: run Static CI tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests
  #       perl auto_run_tests.pl -l static_ci_tests.lst -Config -ExeSubDir Static_Debug -Config CXX11 -Config STATIC -Config IPV6 -Config RTPS -Config GH_ACTIONS
  #   - name: create OpenDDS tar.xz artifact
  #     shell: bash
  #     run: |
  #       cd OpenDDS
  #       rm -rf ACE_TAO
  #       find . -iname "*\.obj" -o -iname "*\.pdb" -o -iname "*\.idb" -o -type f -iname "*\.tlog" | xargs rm
  #       tar cvf ../${{ github.job }}.tar setenv.cmd
  #       git clean -xdfn | cut -d ' ' -f 3- | xargs tar uvf ../${{ github.job }}.tar
  #       xz -3 ../${{ github.job }}.tar
  #   - name: upload OpenDDS artifact
  #     uses: actions/upload-artifact@v2
  #     with:
  #       name: ${{ github.job }}_artifact
  #       path: ${{ github.job }}.tar.xz

  # test_w19_p1_stat_js0_2:

  #   runs-on: windows-2019

  #   needs: build_w19_p1_stat_js0_2

  #   steps:
  #   - name: install openssl-windows & xerces-c
  #     uses: lukka/run-vcpkg@v6
  #     with:
  #       vcpkgGitCommitId: ec6fe06e8da05a8157dc8581fa96b36b571c1bd5
  #       vcpkgArguments: --recurse openssl-windows xerces-c
  #       vcpkgTriplet: x64-windows
  #   - name: checkout MPC
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/MPC
  #       path: MPC
  #   - name: checkout autobuild
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/autobuild
  #       path: autobuild
  #   - name: checkout OpenDDS
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       path: OpenDDS
  #       submodules: true
  #   - name: checkout ACE_TAO
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/ACE_TAO
  #       ref: ace6tao2
  #       path: OpenDDS/ACE_TAO
  #   - name: download ACE_TAO artifact
  #     uses: actions/download-artifact@v2
  #     with:
  #       name: ACE_TAO_w19_p1_stat_js0_2_artifact
  #       path: OpenDDS/ACE_TAO
  #   - name: extract ACE_TAO artifact
  #     shell: bash
  #     run: |
  #       cd OpenDDS/ACE_TAO
  #       tar xvfJ ACE_TAO_w19_p1_stat_js0_2.tar.xz
  #       rm -f ACE_TAO_w19_p1_stat_js0_2.tar.xz
  #   - name: download OpenDDS artifact
  #     uses: actions/download-artifact@v2
  #     with:
  #       name: build_w19_p1_stat_js0_2_artifact
  #       path: OpenDDS
  #   - name: extract OpenDDS artifact
  #     shell: bash
  #     run: |
  #       cd OpenDDS
  #       tar xvfJ build_w19_p1_stat_js0_2.tar.xz
  #       rm -f build_w19_p1_stat_js0_2.tar.xz
  #   - name: check build configuration
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       perl tools\scripts\show_build_config.pl
  #   - name: create autobuild config
  #     shell: bash
  #     run: |
  #       cd OpenDDS
  #       mkdir ${{ github.job }}_autobuild_workspace
  #       cd ${{ github.job }}_autobuild_workspace
  #       export FS_GHW=$(echo $GITHUB_WORKSPACE | sed 's/\\/\//g')
  #       echo using commit $TRIGGERING_COMMIT for SHA
  #       echo $TRIGGERING_COMMIT >> ./SHA
  #       cat > config.xml <<EOF
  #       <autobuild>
  #       <configuration>
  #       <variable name="log_file" value="output.log"/>
  #       <variable name="log_root" value="$FS_GHW/OpenDDS/${{ github.job }}_autobuild_workspace"/>
  #       <variable name="project_root" value="$FS_GHW/OpenDDS"/>
  #       <variable name="root" value="$FS_GHW/OpenDDS/${{ github.job }}_autobuild_workspace"/>
  #       <variable name="junit_xml_output" value="Tests"/>
  #       </configuration>
  #       <command name="log" options="on"/>
  #       <command name="print_os_version"/>
  #       <command name="print_env_vars"/>
  #       <command name="print_ace_config"/>
  #       <command name="print_make_version"/>
  #       <command name="check_compiler" options="gcc"/>
  #       <command name="print_perl_version"/>
  #       <command name="print_autobuild_config"/>
  #       <command name="auto_run_tests" options="script_path=tests dir=$FS_GHW/OpenDDS -ExeSubDir Static_Debug -Config STATIC -Config IPV6 -Config RTPS -Config GH_ACTIONS"/>
  #       <command name="log" options="off"/>
  #       <command name="process_logs" options="prettify"/>
  #       </autobuild>
  #       EOF
  #       cat config.xml
  #   - name: run OpenDDS tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd ${{ github.job }}_autobuild_workspace
  #       perl "%GITHUB_WORKSPACE%\autobuild\autobuild.pl" "%GITHUB_WORKSPACE%\OpenDDS\${{ github.job }}_autobuild_workspace\config.xml"
  #   - name: upload autobuild output
  #     uses: actions/upload-artifact@v2
  #     with:
  #       name: ${{ github.job }}_autobuild_output
  #       path: OpenDDS\${{ github.job }}_autobuild_workspace
  #   - name: check results
  #     shell: bash
  #     run: |
  #       cat "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"
  #       if ! grep -q 'Failures: 0' "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"; then echo "::error file=latest.txt,line=0,col=0::Test Failures: see 'Test Results: ${{ github.job }}'"; fi

  # ACE_TAO_w19_p1_cpp03_stat_FM-08_3:

  #   runs-on: windows-2019

  #   needs: wait_cancel_previous

  #   steps:
  #   - name: checkout OpenDDS
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       path: OpenDDS
  #       submodules: true
  #   - name: checkout ACE_TAO
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/ACE_TAO
  #       ref: ace6tao2
  #       path: OpenDDS/ACE_TAO
  #   - name: get ACE_TAO commit
  #     shell: bash
  #     run: |
  #       cd OpenDDS/ACE_TAO
  #       export ACE_COMMIT=$(git rev-parse HEAD)
  #       echo "ACE_COMMIT=$ACE_COMMIT" >> $GITHUB_ENV
  #   - name: Cache Artifact
  #     id: cache-artifact
  #     uses: actions/cache@v2.1.4
  #     with:
  #       path: ${{ github.job }}.tar.xz
  #       key: ${{ github.job }}_ace6tao2_${{ env.ACE_COMMIT }}
  #   - name: install openssl-windows & xerces-c
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     uses: lukka/run-vcpkg@v6
  #     with:
  #       vcpkgGitCommitId: ec6fe06e8da05a8157dc8581fa96b36b571c1bd5
  #       vcpkgArguments: --recurse openssl-windows xerces-c
  #       vcpkgTriplet: x64-windows
  #   - name: checkout MPC
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/MPC
  #       path: MPC
  #   - name: set up msvc env
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     uses: ilammy/msvc-dev-cmd@v1.7.0
  #   - name: configure OpenDDS
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       configure --ipv6 --std=c++03 --static --rapidjson --no-built-in-topics --no-content-subscription --no-ownership-profile --no-object-model-profile --no-persistence-profile --ace=%GITHUB_WORKSPACE%/OpenDDS/ACE_TAO/ACE --tao=%GITHUB_WORKSPACE%/OpenDDS/ACE_TAO/TAO --mpc=%GITHUB_WORKSPACE%/MPC --xerces3=%VCPKG_ROOT%/installed/x64-windows --openssl=%VCPKG_ROOT%/installed/x64-windows --mpcopts=-hierarchy
  #   - name: build ACE & TAO
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd ACE_TAO\ACE
  #       msbuild -p:Configuration=Debug,Platform=x64 -m ace.sln
  #       cd ..\TAO
  #       msbuild -p:Configuration=Debug,Platform=x64 -m tao.sln
  #   - name: create ACE_TAO tar.xz artifact
  #     if: steps.cache-artifact.outputs.cache-hit != 'true'
  #     shell: bash
  #     run: |
  #       cd OpenDDS/ACE_TAO
  #       perl -ni.bak -e "print unless /opendds/" ACE/bin/MakeProjectCreator/config/default.features # remove opendds features from here, let individual build configure scripts handle those
  #       find . -iname "*\.obj" | xargs rm
  #       tar cvf ../../${{ github.job }}.tar ACE/ace/config.h
  #       git clean -xdfn | cut -d ' ' -f 3- | xargs tar uvf ../../${{ github.job }}.tar
  #       xz -3 ../../${{ github.job }}.tar
  #   - name: upload ACE_TAO artifact
  #     uses: actions/upload-artifact@v2
  #     with:
  #       name: ${{ github.job }}_artifact
  #       path: ${{ github.job }}.tar.xz

  # build_w19_p1_cpp03_stat_FM-08_3:

  #   runs-on: windows-2019

  #   needs: ACE_TAO_w19_p1_cpp03_stat_FM-08_3

  #   steps:
  #   - name: install openssl-windows & xerces-c
  #     uses: lukka/run-vcpkg@v6
  #     with:
  #       vcpkgGitCommitId: ec6fe06e8da05a8157dc8581fa96b36b571c1bd5
  #       vcpkgArguments: --recurse openssl-windows xerces-c
  #       vcpkgTriplet: x64-windows
  #   - name: checkout MPC
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/MPC
  #       path: MPC
  #   - name: checkout OpenDDS
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       path: OpenDDS
  #       submodules: true
  #   - name: checkout ACE_TAO
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/ACE_TAO
  #       ref: ace6tao2
  #       path: OpenDDS/ACE_TAO
  #   - name: download ACE_TAO artifact
  #     uses: actions/download-artifact@v2
  #     with:
  #       name: ACE_TAO_w19_p1_cpp03_stat_FM-08_3_artifact
  #       path: OpenDDS/ACE_TAO
  #   - name: extract ACE_TAO artifact
  #     shell: bash
  #     run: |
  #       cd OpenDDS/ACE_TAO
  #       tar xvfJ ACE_TAO_w19_p1_cpp03_stat_FM-08_3.tar.xz
  #       rm -f ACE_TAO_w19_p1_cpp03_stat_FM-08_3.tar.xz
  #   - uses: ammaraskar/msvc-problem-matcher@0.1
  #   - name: set up msvc env
  #     uses: ilammy/msvc-dev-cmd@v1.7.0
  #   - name: setup gtest
  #     shell: cmd
  #     run: |
  #       cd OpenDDS/tests/googletest
  #       git submodule init
  #       git submodule update
  #       mkdir build
  #       cd build
  #       mkdir install
  #       cmake -DCMAKE_INSTALL_PREFIX=./install ..
  #       cmake --build . --target install
  #   - name: configure OpenDDS
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       configure --ipv6 --std=c++03 --static --rapidjson --gtest=%GITHUB_WORKSPACE%/OpenDDS/tests/googletest/build/install --no-built-in-topics --no-content-subscription --no-ownership-profile --no-object-model-profile --no-persistence-profile --ace=%GITHUB_WORKSPACE%/OpenDDS/ACE_TAO/ACE --tao=%GITHUB_WORKSPACE%/OpenDDS/ACE_TAO/TAO --mpc=%GITHUB_WORKSPACE%/MPC --xerces3=%VCPKG_ROOT%/installed/x64-windows --openssl=%VCPKG_ROOT%/installed/x64-windows
  #   - name: check build configuration
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       perl tools\scripts\show_build_config.pl
  #   - name: build OpenDDS
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       msbuild -p:Configuration=Debug,Platform=x64 -m DDS_no_tests.sln
  #   - name: run Dev Guide tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd DevGuideExamples\DCPS\Messenger
  #       perl run_test.pl -ExeSubDir Static_Debug
  #   - name: build messenger tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests\DCPS\Messenger
  #       perl %ACE_ROOT%\bin\mwc.pl -type vs2019 -static
  #   - name: make messenger tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests\DCPS\Messenger
  #       msbuild -p:Configuration=Debug,Platform=x64 -m Messenger.sln
  #   - name: build compiler tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests\DCPS\Compiler
  #       perl %ACE_ROOT%\bin\mwc.pl -type vs2019 -static
  #   - name: make compiler tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests\DCPS\Compiler
  #       dir
  #       msbuild -p:Configuration=Debug,Platform=x64 -m Compiler.sln
  #   - name: Check Space on Disk
  #     shell: cmd
  #     run: |
  #       dir c:\
  #       dir d:\
  #   - name: run Static CI tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd tests
  #       perl auto_run_tests.pl -l static_ci_tests.lst -Config -ExeSubDir Static_Debug -Config STATIC -Config NO_BUILT_IN_TOPICS -Config DDS_NO_OBJECT_MODEL_PROFILE -Config DDS_NO_OWNERSHIP_PROFILE -Config DDS_NO_PERSISTENCE_PROFILE -Config DDS_NO_CONTENT_SUBSCRIPTION -Config IPV6 -Config RTPS -Config OPENDDS_SECURITY -Config RAPIDJSON -Config GH_ACTIONS
  #   - name: create OpenDDS tar.xz artifact
  #     shell: bash
  #     run: |
  #       cd OpenDDS
  #       rm -rf ACE_TAO
  #       find . -iname "*\.obj" -o -iname "*\.pdb" -o -iname "*\.idb" -o -type f -iname "*\.tlog" | xargs rm
  #       tar cvf ../${{ github.job }}.tar setenv.cmd
  #       git clean -xdfn | cut -d ' ' -f 3- | xargs tar uvf ../${{ github.job }}.tar
  #       xz -3 ../${{ github.job }}.tar
  #   - name: upload OpenDDS artifact
  #     uses: actions/upload-artifact@v2
  #     with:
  #       name: ${{ github.job }}_artifact
  #       path: ${{ github.job }}.tar.xz

  # test_w19_p1_cpp03_stat_FM-08_3:

  #   runs-on: windows-2019

  #   needs: build_w19_p1_cpp03_stat_FM-08_3

  #   steps:
  #   - name: install openssl-windows & xerces-c
  #     uses: lukka/run-vcpkg@v6
  #     with:
  #       vcpkgGitCommitId: ec6fe06e8da05a8157dc8581fa96b36b571c1bd5
  #       vcpkgArguments: --recurse openssl-windows xerces-c
  #       vcpkgTriplet: x64-windows
  #   - name: checkout MPC
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/MPC
  #       path: MPC
  #   - name: checkout autobuild
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/autobuild
  #       path: autobuild
  #   - name: checkout OpenDDS
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       path: OpenDDS
  #       submodules: true
  #   - name: checkout ACE_TAO
  #     uses: actions/checkout@v2.3.4
  #     with:
  #       repository: DOCGroup/ACE_TAO
  #       ref: ace6tao2
  #       path: OpenDDS/ACE_TAO
  #   - name: download ACE_TAO artifact
  #     uses: actions/download-artifact@v2
  #     with:
  #       name: ACE_TAO_w19_p1_cpp03_stat_FM-08_3_artifact
  #       path: OpenDDS/ACE_TAO
  #   - name: extract ACE_TAO artifact
  #     shell: bash
  #     run: |
  #       cd OpenDDS/ACE_TAO
  #       tar xvfJ ACE_TAO_w19_p1_cpp03_stat_FM-08_3.tar.xz
  #       rm -f ACE_TAO_w19_p1_cpp03_stat_FM-08_3.tar.xz
  #   - name: download OpenDDS artifact
  #     uses: actions/download-artifact@v2
  #     with:
  #       name: build_w19_p1_cpp03_stat_FM-08_3_artifact
  #       path: OpenDDS
  #   - name: extract OpenDDS artifact
  #     shell: bash
  #     run: |
  #       cd OpenDDS
  #       tar xvfJ build_w19_p1_cpp03_stat_FM-08_3.tar.xz
  #       rm -f build_w19_p1_cpp03_stat_FM-08_3.tar.xz
  #   - name: check build configuration
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       perl tools\scripts\show_build_config.pl
  #   - name: create autobuild config
  #     shell: bash
  #     run: |
  #       cd OpenDDS
  #       mkdir ${{ github.job }}_autobuild_workspace
  #       cd ${{ github.job }}_autobuild_workspace
  #       export FS_GHW=$(echo $GITHUB_WORKSPACE | sed 's/\\/\//g')
  #       echo using commit $TRIGGERING_COMMIT for SHA
  #       echo $TRIGGERING_COMMIT >> ./SHA
  #       cat > config.xml <<EOF
  #       <autobuild>
  #       <configuration>
  #       <variable name="log_file" value="output.log"/>
  #       <variable name="log_root" value="$FS_GHW/OpenDDS/${{ github.job }}_autobuild_workspace"/>
  #       <variable name="project_root" value="$FS_GHW/OpenDDS"/>
  #       <variable name="root" value="$FS_GHW/OpenDDS/${{ github.job }}_autobuild_workspace"/>
  #       <variable name="junit_xml_output" value="Tests"/>
  #       </configuration>
  #       <command name="log" options="on"/>
  #       <command name="print_os_version"/>
  #       <command name="print_env_vars"/>
  #       <command name="print_ace_config"/>
  #       <command name="print_make_version"/>
  #       <command name="check_compiler" options="gcc"/>
  #       <command name="print_perl_version"/>
  #       <command name="print_autobuild_config"/>
  #       <command name="auto_run_tests" options="script_path=tests dir=$FS_GHW/OpenDDS -ExeSubDir Static_Release -Config STATIC -Config NO_BUILT_IN_TOPICS -Config DDS_NO_OBJECT_MODEL_PROFILE -Config DDS_NO_OWNERSHIP_PROFILE -Config DDS_NO_PERSISTENCE_PROFILE -Config DDS_NO_CONTENT_SUBSCRIPTION -Config IPV6 -Config RTPS -Config OPENDDS_SECURITY -Config RAPIDJSON -Config GH_ACTIONS"/>
  #       <command name="log" options="off"/>
  #       <command name="process_logs" options="prettify"/>
  #       </autobuild>
  #       EOF
  #       cat config.xml
  #   - name: run OpenDDS tests
  #     shell: cmd
  #     run: |
  #       cd OpenDDS
  #       call setenv.cmd
  #       cd ${{ github.job }}_autobuild_workspace
  #       perl "%GITHUB_WORKSPACE%\autobuild\autobuild.pl" "%GITHUB_WORKSPACE%\OpenDDS\${{ github.job }}_autobuild_workspace\config.xml"
  #   - name: upload autobuild output
  #     uses: actions/upload-artifact@v2
  #     with:
  #       name: ${{ github.job }}_autobuild_output
  #       path: OpenDDS\${{ github.job }}_autobuild_workspace
  #   - name: check results
  #     shell: bash
  #     run: |
  #       cat "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"
  #       if ! grep -q 'Failures: 0' "$GITHUB_WORKSPACE/OpenDDS/${{ github.job }}_autobuild_workspace/latest.txt"; then echo "::error file=latest.txt,line=0,col=0::Test Failures: see 'Test Results: ${{ github.job }}'"; fi
